SET autocommit=0;
CREATE TABLE t1 (a INT) ENGINE=InnoDB;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
SET idle_transaction_timeout=1;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	1
BEGIN;
INSERT INTO t1 VALUES (1),(2),(3);
COMMIT;
SELECT * FROM t1;
a
1
2
3
BEGIN;
INSERT INTO t1 VALUES (4),(5),(6);
SELECT * FROM t1;
Got one of the listed errors
SELECT * FROM t1;
a
1
2
3
DROP TABLE t1;
SET idle_transaction_timeout=0;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
SET autocommit=0;
CREATE TABLE t1 (a INT) ENGINE=InnoDB;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
SET idle_readonly_transaction_timeout=1;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	1
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
BEGIN;
INSERT INTO t1 VALUES (1),(2),(3);
SELECT * FROM t1;
a
1
2
3
COMMIT;
SELECT * FROM t1;
a
1
2
3
SELECT * FROM t1;
Got one of the listed errors
SELECT * FROM t1;
a
1
2
3
DROP TABLE t1;
SET idle_readonly_transaction_timeout=0;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
SET autocommit=0;
CREATE TABLE t1 (a INT) ENGINE=InnoDB;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
SET idle_readwrite_transaction_timeout=1;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	1
idle_transaction_timeout	0
BEGIN;
INSERT INTO t1 VALUES (1),(2),(3);
SELECT * FROM t1;
a
1
2
3
COMMIT;
SELECT * FROM t1;
a
1
2
3
SELECT * FROM t1;
a
1
2
3
INSERT INTO t1 VALUES (4),(5),(6);
SELECT * FROM t1;
Got one of the listed errors
DROP TABLE t1;
SET idle_readwrite_transaction_timeout=0;
SHOW VARIABLES LIKE 'idle_%transaction_timeout';
Variable_name	Value
idle_readonly_transaction_timeout	0
idle_readwrite_transaction_timeout	0
idle_transaction_timeout	0
